{% extends "base.html" %}

{% block title %}실시간 주가지수{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-4">실시간 주가지수</h1>
    <p>코스피: <span id="kospi">Loading...</span></p>
    <p>코스닥: <span id="kosdaq">Loading...</span></p>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        let socket = new WebSocket("ws://localhost:8000/ws/stock_index/");

        socket.onmessage = function(event) {
            let data = JSON.parse(event.data);
            document.getElementById("kospi").innerText = data.kospi;
            document.getElementById("kosdaq").innerText = data.kosdaq;
        };
    });
</script>
{% endblock %}
